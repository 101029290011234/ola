angular.module("olaApp",["ngRoute"]).factory("$ola",["$http",function(a){var b=function(a){var b=[];for(var c in a)b.push(c+"="+a[c]);return b.join("&")},c=function(a){for(var b=0,c=[],d=0;512>d;d++)c[d]=parseInt(a[d]),c[d]>0&&(b=d+1);return c.length=b,"["+c.join(",")+"]"},d={get:{ItemList:function(){var b=a.get("/json/universe_plugin_list").then(function(a){return a.data});return b},ServerInfo:function(){var b=a.get("/json/server_stats").then(function(a){return a.data});return b},Ports:function(){var b=a.get("/json/get_ports").then(function(a){return a.data});return b},PortsId:function(b){var c=a.get("/json/get_ports?u="+b).then(function(a){return a.data});return c},InfoPlugin:function(b){var c=a.get("/json/plugin_info?id="+b).then(function(a){return a.data});return c},Dmx:function(b){var c=a.get("/get_dmx?u="+b).then(function(a){return a.data});return c},UniverseInfo:function(b){var c=a.get("/json/universe_info?id="+b).then(function(a){return a.data});return c}},post:{ModifyUniverse:function(c){var d=a({method:"POST",url:"/modify_universe",data:b(c),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){return a.data});return d},AddUniverse:function(c){var d=a({method:"POST",url:"/new_universe",data:b(c),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){return a.data});return d},Dmx:function(d,e){var f={u:d,d:c(e)},g=a({method:"POST",url:"/set_dmx",data:b(f),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){return a.data});return g}},action:{Shutdown:function(){var b=a.get("/quit").then(function(a){return a.data});return b},Reload:function(){var b=a.get("/reload").then(function(a){return a.data});return b},ReloadPids:function(){var b=a.get("/reload_pids").then(function(a){return a.data});return b}},rdm:{}};return d}]).controller("menuCtrl",["$scope","$ola",function(a,b){a.Items={},b.get.ItemList().then(function(b){a.Items=b})}]).controller("overviewCtrl",["$scope","$ola",function(a,b){a.Info={},a.Universes={},b.get.ItemList().then(function(b){a.Universes=b.universes}),b.get.ServerInfo().then(function(b){a.Info=b})}]).controller("addUniverseCtrl",["$scope","$ola",function(a,b){a.Ports={},b.get.Ports().then(function(b){a.Ports=b})}]).controller("universeCtrl",["$scope","$ola","$routeParams","$interval",function(a,b,c,d){a.dmx=[],a.Universe=c.id;var e=d(function(){b.get.Dmx(a.Universe).then(function(b){for(var c=0;512>c;c++)a.dmx[c]="number"==typeof b.dmx[c]?b.dmx[c]:0})},100);a.$on("$destroy",function(){d.cancel(e)}),a.getColor=function(a){return a>140?"black":"white"}}]).controller("sliderUniverseCtrl",["$scope","$ola","$routeParams","$window","$interval",function(a,b,c,d,e){a.get=[],a.list=[],a.last=0,a.offset=0,a.Universe=c.id;for(var f=0;512>f;f++)a.list[f]=f;a.light=function(b){for(f in a.get)a.get[f]=b};var g=e(function(){b.get.Dmx(a.Universe).then(function(b){for(var c=0;512>c;c++)a.get[c]="number"==typeof b.dmx[c]?b.dmx[c]:0})},1e3);a.getColor=function(a){return a>140?"black":"white"},a.ceil=function(a){return d.Math.ceil(a)},a.$watchCollection("get",function(){b.post.Dmx(a.Universe,a.get)}),a.up=function(){a.offset+1!=d.Math.ceil(512/a.limit)&&a.offset++},a.down=function(){0!==a.offset&&a.offset--},a.limit=d.Math.floor(.99*d.innerWidth/66),a.width={width:d.Math.floor(.99*d.innerWidth/a.limit)-52/a.limit+"px"},d.$(window).resize(function(){a.$apply(function(){a.limit=d.Math.floor(.99*d.innerWidth/66),a.width={width:d.Math.floor(.99*d.innerWidth/a.limit)-52/a.limit+"px"}})}),a.$on("$destroy",function(){e.cancel(g)})}]).controller("keypadUniverseCtrl",["$scope","$ola","$routeParams",function(a,b,c){a.Universe=c.id}]).controller("rdmUniverseCtrl",["$scope","$ola","$routeParams",function(a,b,c){a.Universe=c.id}]).controller("patchUniverseCtrl",["$scope","$ola","$routeParams",function(a,b,c){a.Universe=c.id}]).controller("settingUniverseCtrl",["$scope","$ola","$routeParams",function(a,b,c){a.Universe=c.id,a.PortsId={},b.get.PortsId(c.id).then(function(b){a.PortsId=b})}]).controller("infoPlugin",["$scope","$routeParams","$ola",function(a,b,c){a.InfoPlugin={},c.get.InfoPlugin(b.id).then(function(b){a.InfoPlugin=b})}]).controller("infoPlugins",["$scope","$ola",function(){}]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"/views/overview.html",controller:"overviewCtrl"}).when("/universes/",{templateUrl:"/views/overview-universes.html",controller:"overviewCtrl"}).when("/universe/add",{templateUrl:"/views/add-universe.html",controller:"addUniverseCtrl"}).when("/universe/:id",{templateUrl:"/views/overview-universe.html",controller:"universeCtrl"}).when("/universe/:id/keypad",{templateUrl:"/views/keypad-universe.html",controller:"keypadUniverseCtrl"}).when("/universe/:id/sliders",{templateUrl:"/views/sliders-universe.html",controller:"sliderUniverseCtrl"}).when("/universe/:id/rdm",{templateUrl:"/views/rdm-universe.html",controller:"rdmUniverseCtrl"}).when("/universe/:id/patch",{templateUrl:"/views/patch-universe.html",controller:"patchUniverseCtrl"}).when("/universe/:id/settings",{templateUrl:"/views/settings-universe.html",controller:"settingUniverseCtrl"}).when("/plugin/status",{templateUrl:"/views/info-plugins.html",controller:"infoPlugins"}).when("/plugin/:id",{templateUrl:"/views/info-plugin.html",controller:"infoPlugin"}).otherwise({redirectTo:"/"})}]).filter("startFrom",function(){return function(a,b){return b=parseInt(b),a.slice(b)}});
//# sourceMappingURL=app.min.js.map